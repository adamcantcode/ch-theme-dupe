<section class="section bg-grey-warm">
  <div class="button-group filter-button-group">
    <button data-filter="*">show all</button>
    <button data-filter=".thing">thing</button>
    <button data-filter=".thing2">thing2</button>
    <button data-filter=".thing3">thing3</button>
  </div>
  <div class="">
    <div class="flex grid-test">
      <div class="w-full grid-sizer lg:w-[calc(33.33%_-_13px)]"></div>
      <div class="relative w-full bg-white rounded-lg group grid-item thing lg:w-[calc(33.33%_-_13px)]">
        <div class="lg:h-[167px] h-[150px] overflow-hidden rounded-t-lg">
          <img src="<?= placeHolderImage(); ?>" alt="#" class="object-cover w-full h-full transition-all duration-300 rounded-t-lg group-hover:scale-105">
        </div>
        <div class="absolute rounded-t-lg top-sp-4 left-sp-4">
          <a href"#" class="relative inline-block no-underline rounded-pill px-base5-3 py-base5-2 text-white bg-transparent group-hover:bg-white group-hover:!text-primary border border-white z-[6] text-h5-base">TOPIC</a>
        </div>
        <div class="grid bg-white rounded-b-lg p-sp-4">
          <h3 class="text-h4-base"><a href="#" class="block stretched-link">ONE</a></h3>
          <p>TYPE</p>
        </div>
      </div>
      <div class="relative w-full bg-white rounded-lg group grid-item thing lg:w-[calc(33.33%_-_13px)]">
        <div class="lg:h-[167px] h-[150px] overflow-hidden rounded-t-lg">
          <img src="<?= placeHolderImage(); ?>" alt="#" class="object-cover w-full h-full transition-all duration-300 rounded-t-lg group-hover:scale-105">
        </div>
        <div class="absolute rounded-t-lg top-sp-4 left-sp-4">
          <a href"#" class="relative inline-block no-underline rounded-pill px-base5-3 py-base5-2 text-white bg-transparent group-hover:bg-white group-hover:!text-primary border border-white z-[6] text-h5-base">TOPIC</a>
        </div>
        <div class="grid bg-white rounded-b-lg p-sp-4">
          <h3 class="text-h4-base"><a href="#" class="block stretched-link">ONE</a></h3>
          <p>TYPE</p>
        </div>
      </div>
      <div class="relative w-full bg-white rounded-lg group grid-item thing lg:w-[calc(33.33%_-_13px)]">
        <div class="lg:h-[167px] h-[150px] overflow-hidden rounded-t-lg">
          <img src="<?= placeHolderImage(); ?>" alt="#" class="object-cover w-full h-full transition-all duration-300 rounded-t-lg group-hover:scale-105">
        </div>
        <div class="absolute rounded-t-lg top-sp-4 left-sp-4">
          <a href"#" class="relative inline-block no-underline rounded-pill px-base5-3 py-base5-2 text-white bg-transparent group-hover:bg-white group-hover:!text-primary border border-white z-[6] text-h5-base">TOPIC</a>
        </div>
        <div class="grid bg-white rounded-b-lg p-sp-4">
          <h3 class="text-h4-base"><a href="#" class="block stretched-link">ONE</a></h3>
          <p>TYPE</p>
        </div>
      </div>
      <div class="relative w-full bg-white rounded-lg group grid-item thing2 lg:w-[calc(33.33%_-_13px)]">
        <div class="lg:h-[167px] h-[150px] overflow-hidden rounded-t-lg">
          <img src="<?= placeHolderImage(); ?>" alt="#" class="object-cover w-full h-full transition-all duration-300 rounded-t-lg group-hover:scale-105">
        </div>
        <div class="absolute rounded-t-lg top-sp-4 left-sp-4">
          <a href"#" class="relative inline-block no-underline rounded-pill px-base5-3 py-base5-2 text-white bg-transparent group-hover:bg-white group-hover:!text-primary border border-white z-[6] text-h5-base">TOPIC</a>
        </div>
        <div class="grid bg-white rounded-b-lg p-sp-4">
          <h3 class="text-h4-base"><a href="#" class="block stretched-link">TWO</a></h3>
          <p>TYPE</p>
        </div>
      </div>
      <div class="relative w-full bg-white rounded-lg group grid-item thing2 lg:w-[calc(33.33%_-_13px)]">
        <div class="lg:h-[167px] h-[150px] overflow-hidden rounded-t-lg">
          <img src="<?= placeHolderImage(); ?>" alt="#" class="object-cover w-full h-full transition-all duration-300 rounded-t-lg group-hover:scale-105">
        </div>
        <div class="absolute rounded-t-lg top-sp-4 left-sp-4">
          <a href"#" class="relative inline-block no-underline rounded-pill px-base5-3 py-base5-2 text-white bg-transparent group-hover:bg-white group-hover:!text-primary border border-white z-[6] text-h5-base">TOPIC</a>
        </div>
        <div class="grid bg-white rounded-b-lg p-sp-4">
          <h3 class="text-h4-base"><a href="#" class="block stretched-link">TWO</a></h3>
          <p>TYPE</p>
        </div>
      </div>
      <div class="relative w-full bg-white rounded-lg group grid-item thing2 lg:w-[calc(33.33%_-_13px)]">
        <div class="lg:h-[167px] h-[150px] overflow-hidden rounded-t-lg">
          <img src="<?= placeHolderImage(); ?>" alt="#" class="object-cover w-full h-full transition-all duration-300 rounded-t-lg group-hover:scale-105">
        </div>
        <div class="absolute rounded-t-lg top-sp-4 left-sp-4">
          <a href"#" class="relative inline-block no-underline rounded-pill px-base5-3 py-base5-2 text-white bg-transparent group-hover:bg-white group-hover:!text-primary border border-white z-[6] text-h5-base">TOPIC</a>
        </div>
        <div class="grid bg-white rounded-b-lg p-sp-4">
          <h3 class="text-h4-base"><a href="#" class="block stretched-link">TWO</a></h3>
          <p>TYPE</p>
        </div>
      </div>
      <div class="relative w-full bg-white rounded-lg group grid-item thing3 lg:w-[calc(33.33%_-_13px)]">
        <div class="lg:h-[167px] h-[150px] overflow-hidden rounded-t-lg">
          <img src="<?= placeHolderImage(); ?>" alt="#" class="object-cover w-full h-full transition-all duration-300 rounded-t-lg group-hover:scale-105">
        </div>
        <div class="absolute rounded-t-lg top-sp-4 left-sp-4">
          <a href"#" class="relative inline-block no-underline rounded-pill px-base5-3 py-base5-2 text-white bg-transparent group-hover:bg-white group-hover:!text-primary border border-white z-[6] text-h5-base">TOPIC</a>
        </div>
        <div class="grid bg-white rounded-b-lg p-sp-4">
          <h3 class="text-h4-base"><a href="#" class="block stretched-link">THREE</a></h3>
          <p>TYPE</p>
        </div>
      </div>
      <div class="relative w-full bg-white rounded-lg group grid-item thing3 lg:w-[calc(33.33%_-_13px)]">
        <div class="lg:h-[167px] h-[150px] overflow-hidden rounded-t-lg">
          <img src="<?= placeHolderImage(); ?>" alt="#" class="object-cover w-full h-full transition-all duration-300 rounded-t-lg group-hover:scale-105">
        </div>
        <div class="absolute rounded-t-lg top-sp-4 left-sp-4">
          <a href"#" class="relative inline-block no-underline rounded-pill px-base5-3 py-base5-2 text-white bg-transparent group-hover:bg-white group-hover:!text-primary border border-white z-[6] text-h5-base">TOPIC</a>
        </div>
        <div class="grid bg-white rounded-b-lg p-sp-4">
          <h3 class="text-h4-base"><a href="#" class="block stretched-link">THREE</a></h3>
          <p>TYPE</p>
        </div>
      </div>
      <div class="relative w-full bg-white rounded-lg group grid-item thing3 lg:w-[calc(33.33%_-_13px)]">
        <div class="lg:h-[167px] h-[150px] overflow-hidden rounded-t-lg">
          <img src="<?= placeHolderImage(); ?>" alt="#" class="object-cover w-full h-full transition-all duration-300 rounded-t-lg group-hover:scale-105">
        </div>
        <div class="absolute rounded-t-lg top-sp-4 left-sp-4">
          <a href"#" class="relative inline-block no-underline rounded-pill px-base5-3 py-base5-2 text-white bg-transparent group-hover:bg-white group-hover:!text-primary border border-white z-[6] text-h5-base">TOPIC</a>
        </div>
        <div class="grid bg-white rounded-b-lg p-sp-4">
          <h3 class="text-h4-base"><a href="#" class="block stretched-link">THREE</a></h3>
          <p>TYPE</p>
        </div>
      </div>
      <div class="relative w-full bg-white rounded-lg group grid-item thing lg:w-[calc(33.33%_-_13px)]">
        <div class="lg:h-[167px] h-[150px] overflow-hidden rounded-t-lg">
          <img src="<?= placeHolderImage(); ?>" alt="#" class="object-cover w-full h-full transition-all duration-300 rounded-t-lg group-hover:scale-105">
        </div>
        <div class="absolute rounded-t-lg top-sp-4 left-sp-4">
          <a href"#" class="relative inline-block no-underline rounded-pill px-base5-3 py-base5-2 text-white bg-transparent group-hover:bg-white group-hover:!text-primary border border-white z-[6] text-h5-base">TOPIC</a>
        </div>
        <div class="grid bg-white rounded-b-lg p-sp-4">
          <h3 class="text-h4-base"><a href="#" class="block stretched-link">ONE</a></h3>
          <p>TYPE</p>
        </div>
      </div>
      <div class="relative w-full bg-white rounded-lg group grid-item thing lg:w-[calc(33.33%_-_13px)]">
        <div class="lg:h-[167px] h-[150px] overflow-hidden rounded-t-lg">
          <img src="<?= placeHolderImage(); ?>" alt="#" class="object-cover w-full h-full transition-all duration-300 rounded-t-lg group-hover:scale-105">
        </div>
        <div class="absolute rounded-t-lg top-sp-4 left-sp-4">
          <a href"#" class="relative inline-block no-underline rounded-pill px-base5-3 py-base5-2 text-white bg-transparent group-hover:bg-white group-hover:!text-primary border border-white z-[6] text-h5-base">TOPIC</a>
        </div>
        <div class="grid bg-white rounded-b-lg p-sp-4">
          <h3 class="text-h4-base"><a href="#" class="block stretched-link">ONE</a></h3>
          <p>TYPE</p>
        </div>
      </div>
      <div class="relative w-full bg-white rounded-lg group grid-item thing2 lg:w-[calc(33.33%_-_13px)]">
        <div class="lg:h-[167px] h-[150px] overflow-hidden rounded-t-lg">
          <img src="<?= placeHolderImage(); ?>" alt="#" class="object-cover w-full h-full transition-all duration-300 rounded-t-lg group-hover:scale-105">
        </div>
        <div class="absolute rounded-t-lg top-sp-4 left-sp-4">
          <a href"#" class="relative inline-block no-underline rounded-pill px-base5-3 py-base5-2 text-white bg-transparent group-hover:bg-white group-hover:!text-primary border border-white z-[6] text-h5-base">TOPIC</a>
        </div>
        <div class="grid bg-white rounded-b-lg p-sp-4">
          <h3 class="text-h4-base"><a href="#" class="block stretched-link">TWO</a></h3>
          <p>TYPE</p>
        </div>
      </div>
      <div class="relative w-full bg-white rounded-lg group grid-item thing2 lg:w-[calc(33.33%_-_13px)]">
        <div class="lg:h-[167px] h-[150px] overflow-hidden rounded-t-lg">
          <img src="<?= placeHolderImage(); ?>" alt="#" class="object-cover w-full h-full transition-all duration-300 rounded-t-lg group-hover:scale-105">
        </div>
        <div class="absolute rounded-t-lg top-sp-4 left-sp-4">
          <a href"#" class="relative inline-block no-underline rounded-pill px-base5-3 py-base5-2 text-white bg-transparent group-hover:bg-white group-hover:!text-primary border border-white z-[6] text-h5-base">TOPIC</a>
        </div>
        <div class="grid bg-white rounded-b-lg p-sp-4">
          <h3 class="text-h4-base"><a href="#" class="block stretched-link">TWO</a></h3>
          <p>TYPE</p>
        </div>
      </div>
      <div class="relative w-full bg-white rounded-lg group grid-item thing3 lg:w-[calc(33.33%_-_13px)]">
        <div class="lg:h-[167px] h-[150px] overflow-hidden rounded-t-lg">
          <img src="<?= placeHolderImage(); ?>" alt="#" class="object-cover w-full h-full transition-all duration-300 rounded-t-lg group-hover:scale-105">
        </div>
        <div class="absolute rounded-t-lg top-sp-4 left-sp-4">
          <a href"#" class="relative inline-block no-underline rounded-pill px-base5-3 py-base5-2 text-white bg-transparent group-hover:bg-white group-hover:!text-primary border border-white z-[6] text-h5-base">TOPIC</a>
        </div>
        <div class="grid bg-white rounded-b-lg p-sp-4">
          <h3 class="text-h4-base"><a href="#" class="block stretched-link">THREE</a></h3>
          <p>TYPE</p>
        </div>
      </div>
    </div>
  </div>
  <div class="grid justify-end">
    <a role="button" class="w-full ch-button button-primary justify-self-center lg:w-auto load-more-js">Load more</a>
  </div>
</section>

<script src="https://unpkg.com/isotope-layout@3/dist/isotope.pkgd.min.js"></script>
<script>
  window.addEventListener('DOMContentLoaded', () => {
    // Isotope settings
    const grid = document.querySelector('.grid-test');
    const iso = new Isotope(grid, {
      initLayout: false, // Don't initialize to start
      columnWidth: '.grid-sizer',
      layoutMode: 'masonry',
      masonry: {
        gutter: 20
      }
    });

    // Initial state
    const itemsAll = iso.getItemElements();
    // Hide after 6
    itemsAll.forEach((item, index) => {
      if (index > 6) {
        item.classList.add('noshow');
      }
    });
    // Initialize
    iso.arrange();

    // Filter
    const filterButtonGroup = document.querySelector('.filter-button-group');
    filterButtonGroup.addEventListener('click', function(event) {
      // Check if the clicked element is a button
      if (event.target.tagName === 'BUTTON') {
        // Get the filter value from the data-filter attribute
        const filterValue = event.target.getAttribute('data-filter');

        // Update Isotope with the new filter
        iso.arrange({
          filter: filterValue
        });
      }

      // Handle visibility due to load more
      const itemsAll = iso.getItemElements();
      const itemsFilters = iso.getFilteredItemElements();

      // Unhide all
      itemsAll.forEach(item => {
        item.classList.remove('active', 'noshow');
      });

      // Hide after 6
      itemsFilters.forEach((item, index) => {
        item.classList.add('active');
        if (index > 6) {
          item.classList.add('noshow');
        }
      });
      iso.arrange();
      // Load more
      // Check if more than 5 active and visible
      // Get all items
      const filteredElements = itemsAll.filter(element => {
        return element.classList.contains('active');
      });

      // Log the filtered elements to the console
      if (filteredElements.length < 6) {
        document.querySelector('.load-more-js').classList.add('noshow');
      } else {
        document.querySelector('.load-more-js').classList.remove('noshow');
      }
    });
  });
</script>